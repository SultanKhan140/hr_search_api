# Design Summary – HR Employee Search API

## 🧩 Project Overview

This microservice provides a **search API** for an employee directory used by HR systems. It is built using **FastAPI**, **SQLAlchemy**, and **SQLite** (for demo), and is designed to handle millions of records efficiently, supporting flexible filters and customizable column selection per organization.

---

## 🛠️ Architectural Overview

### ✅ Technology Stack
- **Framework**: FastAPI
- **ORM**: SQLAlchemy
- **Database**: SQLite (development), PostgreSQL-ready
- **Testing**: Pytest
- **Containerization**: Docker-ready

### 📦 Key Features Implemented
- 🔍 **Dynamic Search API**: Filters on `status`, `location`, `department`, `position`, `company`
- 🧹 **Soft Deletes**: Implemented using a shared `BaseModelMixin`
- 🕒 **Timestamps**: Auto-managed `created_at` and `updated_at` for all tables
- ⚖️ **Rate Limiting**: Basic IP-based mechanism using only standard libraries
- 📑 **OpenAPI Spec**: Automatically generated by FastAPI

---

## 🧱 Models

All key domain entities (`Employee`, `Department`, `Position`, `Location`, `Organization`, `ContactInfo`) are normalized and relational. Relationships use foreign keys and joined queries with `joinedload` for eager loading.

---

## ⚙️ Assumptions & Trade-offs

- The **organization ID** is mocked as `1` (in production, it would come from auth/session)
- **Column preferences** are assumed to be configured via a mock function (`get_allowed_columns`) instead of a persisted config
- The **rate limiter** is a simple in-memory implementation that would not scale across multiple instances (use Redis in production)
- **CRUD APIs** were explicitly omitted as per requirements

---

## 📈 Scalability Considerations

- Used **SQL joins** with eager loading to avoid N+1 query issues
- **Indexed columns** (`status`, `department_id`, etc.) for fast filtering
- Cleanly separated services, schemas, and routing to support future extensibility
- Ready for horizontal scaling and sharding with minimal changes

---

## 🚀 Future Enhancements (If Extended)

- Replace in-memory rate limiter with Redis-backed one
- Store dynamic column configurations in DB
- Add user auth + token-based org resolution
- Switch to PostgreSQL or MySQL for production
- Add pagination and sorting support in the search API
- Unit test coverage and CI/CD integration

---

